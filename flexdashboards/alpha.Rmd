---
title: "Starbucks"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    navbar:
      - {title: "About", href: "http://google.com"}
    social: ["menu"]
    source_code: embed
---

```{r setup, include=FALSE}
library(flexdashboard)
```

```{r loadDataETC, include=FALSE}
library(tidyverse)     # tidy data, includes readr
library(leaflet)       # GIS/mapping
library(DT)            # DataTables provides filtering, pagination, sorting, and many other features in the tables.
```

```{r, include=FALSE}
starbucks <- read_csv("https://opendata.socrata.com/api/views/ddym-zvjk/rows.csv")

tbl_df(starbucks)  %>%  
  filter(State == "NC") -> starbucks
```


Column {data-width=650 .tabset .tabset-fade}
-----------------------------------------------------------------------

### Starbucks - Where are You?

```{r}
leaflet() %>% 
  addTiles() %>% 
  setView(-78.8310, 35.9867, zoom = 10) %>% 
  addMarkers(data = starbucks, lat = ~ Latitude, lng = ~ Longitude, popup = starbucks$Name)
```

### Addresses and Phone Numbers
```{r}
starbucks  %>%  
  filter(State == "NC") %>% 
  select(Name, `Phone Number`, `Street Address`, City, Coordinates, `Store Number`) %>% 
  datatable()
```

Column {data-width=350}
-----------------------------------------------------------------------

### Number of Raleigh Stores

```{r}
starbucks %>% 
  filter(City == "Raleigh") %>% 
  count() -> TotNum



gauge(as.numeric(TotNum), min = 0, max = 40, 
        gaugeSectors(success = c(16,29), warning = c(0,15), danger = c(30,40)))
```
  
### Example Warning
```{r}
gauge(14, min = 0, max = 40, 
        gaugeSectors(success = c(16,29), warning = c(0,15), danger = c(30,40)))
```


### Example Danger
```{r}
gauge(37, min = 0, max = 40, 
        gaugeSectors(success = c(16,29), warning = c(0,15), danger = c(30,40)))
```


### Durham

```{r}
starbucks  %>%  
  filter(City == "Durham") %>% 
  count() %>% 
  valueBox(icon = "fa-coffee", "Durham", "#003366" )
```


### Chapel Hill

```{r}
starbucks  %>%  
  filter(City == "Chapel Hill") %>% 
  count() %>% 
  valueBox(icon = "fa-coffee" )
```


### Cary

```{r}
starbucks  %>%  
  filter(City == "Cary") %>% 
  count() %>% 
  valueBox(icon = "fa-coffee", "Cary", "#707a00" )
```

